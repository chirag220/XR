<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <title>XR Messaging Web App</title>

    <!-- App favicon -->
    <link rel="icon" type="image/png" sizes="512x512" href="/public/images/xr-logo.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/public/images/xr-logo.png">

    <!-- Tailwind (utility classes) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: { primary: '#4f46e5', urgent: '#dc2626', overlay: 'rgba(0,0,0,0.7)' }
                }
            }
        }
    </script>

    <!-- Full app styles -->
    <link rel="stylesheet" href="/public/css/scribe-cockpit.css">
</head>

<body class="bg-gradient-to-br from-gray-900 to-gray-800 text-white font-sans h-screen overflow-hidden">
    <noscript>
        <div class="p-4 bg-red-700 text-white text-center">
            JavaScript is disabled. The Scribe Cockpit requires JavaScript to display live status and transcripts.
        </div>
    </noscript>

    <!-- App container -->
    <div class="flex flex-col h-full" role="application" aria-label="XR Dock - Scribe Cockpit">

        <!-- Top Bar -->
        <div class="flex justify-between items-center px-4 md:px-6 py-3 md:py-4 bg-gray-900 shadow-md z-10">
            <h1 class="text-xl md:text-2xl font-bold text-white">XR Dock</h1>
            <div class="flex gap-4 items-center">
                <!-- JS toggles bg-* class based on connection -->
                <span id="statusPill"
                    class="px-3 py-1 rounded-full text-white text-xs md:text-base bg-yellow-500 select-none"
                    aria-live="polite" aria-label="Connection status: Connecting">
                    Connecting
                </span>
            </div>
        </div>

        <!-- Main Area -->
        <div class="flex-1 flex flex-col md:flex-row overflow-hidden">

            <!-- LEFT: Devices + Transcript -->
            <aside
                class="w-full md:w-1/3 bg-gray-950/90 text-xs md:text-sm px-3 md:px-4 py-3 flex flex-col overflow-hidden">
                <!-- Connected Devices -->
                <div class="pb-3 border-b border-white/10 sticky top-0 z-20 bg-gray-950/90">
                    <h3 class="text-base font-semibold">Connected Devices</h3>
                    <ul id="deviceList" class="list-disc pl-5 text-gray-300 space-y-1"></ul>
                </div>

                <!-- Live Translation header -->
                <div class="sticky top-[68px] md:top-[72px] z-10 bg-gray-950/90 py-2">
                    <h3 class="text-base font-semibold">Live Translation</h3>
                </div>

                <!-- Transcript list -->
                <div class="flex-1 min-h-0">
                    <div id="liveTranscript"
                        class="scribe-scroll h-full overflow-y-auto px-1 py-2 space-y-2 text-sm md:text-base"
                        aria-live="polite">
                        <!-- transcript cards appended here -->
                    </div>
                </div>
            </aside>

            <!-- RIGHT: SOAP Note -->
            <main class="flex-1 bg-gray-900/60 overflow-hidden flex flex-col">
                <!-- Header the badge will attach to -->
                <div class="sticky top-0 z-10 bg-gray-900/60 px-4 py-3 border-b border-white/10">
                    <h2 class="text-base md:text-lg font-semibold">SOAP Note</h2>
                </div>

                <!-- Panel content -->
                <div id="soapNotePanel" class="flex-1 min-h-0 relative">
                    <!-- Scrollable SOAP editor area (JS renders sections here) -->
                    <div id="soapScroller" class="scribe-soap-scroll scribe-scroll"></div>

                    <!-- Sticky actions (kept in HTML per your request) -->
                    <div id="soapActions" class="scribe-soap-actions">
                        <button id="_scribe_clear" class="scribe-btn scribe-btn-ghost" type="button">Clear</button>
                        <button id="_scribe_save" class="scribe-btn scribe-btn-primary" type="button">Save</button>
                        <!-- Always disabled, red -->
                        <button id="_scribe_add_ehr" class="scribe-btn scribe-add-ehr-disabled" type="button"
                            disabled>Add To EHR</button>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Cockpit logic -->
    <script src="/public/js/scribe-cockpit.js"></script>
</body>

</html>